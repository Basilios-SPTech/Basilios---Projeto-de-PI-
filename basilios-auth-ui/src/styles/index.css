@import "tailwindcss";
@custom-variant max820 (width <= 820px);
@custom-variant max560 (width <= 560px);

/* =========================
   TOKENS & FOUNDATIONS
   ========================= */
:root{
  /* Paleta (mantida) */
  --primary-h:4; --primary-s:58%; --primary-l:46%;
  --primary:hsl(var(--primary-h) var(--primary-s) var(--primary-l));
  --primary-hover:hsl(var(--primary-h) var(--primary-s) calc(var(--primary-l) - 10%));
  --bg:#0f1115; --surface:#fff; --surface-2:#f7f7f8;
  --text:#101114; --text-weak:#5f6672; --border:#e6e7ea;

  /* Camadas / efeitos */
  --grad:linear-gradient(180deg,#fff 0%,#fafafb 100%);
  --shadow-sm:0 6px 18px rgba(16,17,20,.08);
  --shadow:0 8px 30px rgba(16,17,20,.12);
  --shadow-lg:0 20px 40px rgba(16,17,20,.18);
  --radius:14px; --radius-sm:10px; --radius-pill:999px; --container:1200px;

  /* Tipo & tamanho */
  --font:"Montserrat",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  --fs-h2:clamp(1.25rem,1.1rem + 1vw,2rem);
  --fs-body:clamp(.95rem,.88rem + .25vw,1rem);
  --line:1.55;

  /* Acessibilidade */
  --focus:0 0 0 4px color-mix(in oklab,var(--primary),white 84%);
}

/* Reduce Motion */
@media (prefers-reduced-motion: reduce){
  *{animation:none!important; transition:none!important}
}

/* Scrollbar sutil (WebKit) */
*::-webkit-scrollbar{width:10px;height:10px}
*::-webkit-scrollbar-thumb{background:color-mix(in oklab,var(--text-weak),white 30%);border-radius:10px;border:2px solid transparent;background-clip:content-box}
*::-webkit-scrollbar-track{background:transparent}

/* =========================
   BASE
   ========================= */
html,body,#root{height:100%}
body{
  font-family:var(--font);
  font-size:var(--fs-body);
  line-height:var(--line);
  color:var(--text);
  background:var(--bg);
  overflow-x:hidden;
  padding:20px;
  position:relative;
  -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
}
body::before{
  content:"";
  position:fixed; inset:0;
  background:var(--grad);
  filter:blur(18px) saturate(1.05);
  z-index:-1;
}
*,*::before,*::after{box-sizing:border-box}
img{display:block;max-width:100%;height:100px}
:focus-visible{outline:none; box-shadow:var(--focus)!important; border-radius:8px}

/* Links */
a{color:var(--primary); text-underline-offset:3px}
a:hover{color:var(--primary-hover)}

/* =========================
   LAYOUT
   ========================= */
.container-tw{
  @apply [max-width:var(--container)] mx-auto px-[clamp(16px,2vw,24px)] py-[26px];
  background:color-mix(in oklab,var(--surface),white 2%);
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow-sm);
  backdrop-filter:saturate(1.06);
}

/* Seções / divisores */
.section{
  @apply mt-8 mb-2;
}
.divider{
  height:1px; background:var(--border);
  margin:18px 0;
  border-radius:1px;
}

/* =========================
   TÍTULOS
   ========================= */
.titulo-lista{
  @apply text-[color:var(--text)] font-extrabold mb-[22px] pb-[6px];
  font-size:var(--fs-h2);
  letter-spacing:.2px;
  position:relative;
}
.titulo-lista::after{
  content:"";
  position:absolute; left:0; bottom:0;
  width:60px; height:3px;
  background:var(--primary);
  border-radius:2px;
  box-shadow:0 1px 0 color-mix(in oklab,var(--primary),black 10%);
}

/* =========================
   FORM / GRID
   ========================= */
.form-bloco{
  @apply flex flex-col gap-[22px] p-[clamp(20px,2vw,30px)] rounded-[var(--radius)] border shadow-[var(--shadow-sm)];
  background:
    radial-gradient(1200px 300px at 10% -20%, color-mix(in oklab,var(--primary),white 92%) 0%, transparent 60%),
    var(--surface-2);
  border-color:var(--border);
}
.grid-1-2{ @apply grid grid-cols-2 gap-[clamp(14px,2vw,20px)] max820:grid-cols-1 }

/* Fieldset */
.field-row{ @apply grid grid-cols-1 gap-2 }
.field-label{ @apply text-[13px] font-semibold text-[color:var(--text-weak)] tracking-wide }

/* =========================
   INPUTS
   ========================= */
.input-base{
  @apply w-full px-4 py-[14px] rounded-[12px] border transition shadow-[var(--shadow-sm)];
  background:var(--surface); color:var(--text);
  border-color:var(--border);
  caret-color:var(--primary);
}
.input-base::placeholder{ color:var(--text-weak) }
.input-base:hover{ transform:translateY(-1px); box-shadow:var(--shadow) }
.input-base:focus{ box-shadow:var(--shadow) }

/* Estados de validação */
.input-success{ border-color:color-mix(in oklab, #22c55e, black 10%) }
.input-error{ border-color:color-mix(in oklab, #ef4444, black 10%) }
.help-text{ @apply text-xs mt-1; color:var(--text-weak) }
.error-text{ @apply text-xs mt-1 font-medium; color:#ef4444 }

/* Input com ícone (opcional) */
.input-wrap{ position:relative }
.input-prefix{
  position:absolute; inset-inline-start:12px; top:50%; translate:0 -50%;
  width:20px; height:20px; opacity:.6; pointer-events:none;
}
.input-base.with-prefix{ padding-inline-start:40px }

/* =========================
   BOTÕES
   ========================= */
/* Base compartilhada para TODAS as variantes (sem usar util "btn" inexistente) */
.btn,
.btn-salvar,
.btn-cancelar,
.btn-editar,
.btn-deletar,
.btn-pausar{
  @apply inline-flex items-center justify-center gap-2 px-4 py-3 font-semibold tracking-[.01em]
         rounded-[var(--radius-sm)] border shadow-[var(--shadow-sm)]
         transition active:translate-y-[1px] select-none;
  will-change:transform, box-shadow, background-color;
}
.btn:disabled,
.btn-salvar:disabled,
.btn-cancelar:disabled,
.btn-editar:disabled,
.btn-deletar:disabled,
.btn-pausar:disabled{
  opacity:.6; cursor:not-allowed; transform:none!important;
}

/* Variantes (mantendo cores) */
.btn-salvar{
  @apply text-white;
  background:var(--primary);
  border-color:color-mix(in oklab,var(--primary),black 8%);
}
.btn-salvar:hover{ background:var(--primary-hover) }

.btn-cancelar{
  @apply text-white;
  background:#8a919e;
  border-color:color-mix(in oklab,#8a919e,black 10%);
}
.btn-editar{
  @apply text-white;
  background:#1f7aec;
  border-color:color-mix(in oklab,#1f7aec,black 8%);
}
.btn-deletar{
  @apply text-white;
  background:#BB3530;
  border-color:color-mix(in oklab,#BB3530,black 8%);
}
.btn-pausar{
  @apply text-white;
  background:var(--text-weak);
  border-color:color-mix(in oklab,var(--text-weak),black 12%);
}

/* Tamanhos */
.btn-sm,
.btn-salvar.btn-sm,
.btn-cancelar.btn-sm,
.btn-editar.btn-sm,
.btn-deletar.btn-sm,
.btn-pausar.btn-sm{ @apply px-3 py-2 text-[13px] rounded-[10px] }
.btn-lg,
.btn-salvar.btn-lg,
.btn-cancelar.btn-lg,
.btn-editar.btn-lg,
.btn-deletar.btn-lg,
.btn-pausar.btn-lg{ @apply px-5 py-3 text-[15px] rounded-[14px] }

/* Botão com ícone apenas */
.icon-btn{
  @apply w-10 h-10 grid place-items-center rounded-[12px] border
         shadow-[var(--shadow-sm)] bg-[color:var(--surface)] text-[color:var(--text)];
  transition:transform .15s ease, box-shadow .2s ease;
}
.icon-btn:hover{ transform:translateY(-1px); box-shadow:var(--shadow) }

/* =========================
   CARDS DE PRODUTO
   ========================= */
.card-produto{
  @apply p-4 border rounded-[var(--radius)] shadow-[var(--shadow)] transition overflow-hidden;
  background:
    radial-gradient(800px 200px at 100% -20%, color-mix(in oklab,var(--primary),white 95%) 0%, transparent 60%),
    var(--surface);
  border-color:var(--border);
}
.card-produto:hover{ @apply -translate-y-[2px]; box-shadow:var(--shadow-lg) }
.card-produto.pausado{ filter:grayscale(.55) opacity(.85) }

/* Badges */
.badge{
  @apply inline-flex items-center gap-1 px-2 py-1 text-[12px] rounded-[999px] border;
  background:var(--surface-2); border-color:var(--border); color:var(--text-weak);
}

/* Grade responsiva */
.grade-produtos{
  @apply grid gap-[clamp(18px,2.2vw,30px)] mt-[28px];
  grid-template-columns: repeat(auto-fit, minmax(min(260px,100%),1fr));
}

/* Empty state */
.empty{
  @apply grid place-items-center text-center p-12 rounded-[var(--radius)] border;
  background:var(--surface-2); border-color:var(--border); color:var(--text-weak);
}

/* =========================
   MODAL
   ========================= */
.modal-overlay{
  @apply fixed inset-0 grid place-items-center z-[1000] p-4;
  background:color-mix(in oklab,var(--bg), black 0%) / .70;
  backdrop-filter:blur(8px) saturate(1.05);
}
.modal-content{
  @apply relative w-full max-w-[min(720px,100%)] max-h-[90vh] overflow-auto p-6
         border rounded-[var(--radius)] shadow-[var(--shadow-lg)];
  background:var(--surface); border-color:var(--border);
}
.modal-close{
  @apply absolute top-[14px] right-[14px] w-10 h-10 grid place-items-center
         rounded-full border shadow-[var(--shadow-sm)]
         bg-[color:var(--surface-2)] text-[color:var(--text)];
  transition:transform .15s ease, box-shadow .2s ease;
}
.modal-close:hover{ @apply -translate-y-[1px]; box-shadow:var(--shadow) }

/* =========================
   TABLE (opcional, comum em CRUD)
   ========================= */
.table{
  @apply w-full border rounded-[var(--radius)] overflow-hidden;
  border-color:var(--border); background:var(--surface);
  box-shadow:var(--shadow-sm);
}
.table thead th{
  @apply text-left text-[13px] font-semibold;
  color:var(--text-weak); background:var(--surface-2);
  padding:12px 16px; border-bottom:1px solid var(--border);
}
.table tbody td{
  padding:14px 16px; border-bottom:1px solid var(--border);
}
.table tbody tr:hover{ background:color-mix(in oklab,var(--surface-2),white 40%) }

/* =========================
   RESPONSIVO FINO (CORRIGIDO)
   ========================= */
@media (width <= 1024px){
  .container-tw{ padding:22px clamp(14px,2.5vw,22px) }
}
@media (width <= 820px){
  .titulo-lista{ margin-bottom:18px }
  .form-bloco{ gap:18px }
}
@media (width <= 560px){
  .btn,
  .btn-salvar,
  .btn-cancelar,
  .btn-editar,
  .btn-deletar,
  .btn-pausar{ @apply w-full }
  .modal-content{ @apply p-4 }
}

/* =========================
   MICRO-ANIMAÇÕES
   ========================= */
@keyframes fadeSlideUp{
  from{ opacity:0; transform:translateY(8px) }
  to{ opacity:1; transform:translateY(0) }
}
.fade-in{ animation:fadeSlideUp .22s ease both }

/* =========================
   UTILIDADES EXTRAS
   ========================= */
.kbd{
  @apply inline-block px-2 py-[2px] text-[12px] border rounded-md;
  background:var(--surface-2); border-color:var(--border); color:var(--text-weak);
}
